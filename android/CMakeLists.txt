cmake_minimum_required(VERSION 3.6.0)

# Set as required by ../third_party/dart-sdk/sources.cmake included below
set(DARTSDK_ROOT ../third_party/dart-sdk/)

# Import sources generated by tools/update-dart-sdk.py
# This provides variables, and requires DARTSDK_ROOT to be set.
#  - dart_dl_sources
include(
  ../third_party/dart-sdk/sources.cmake
)

add_library(
  dart_dl_api

  # Build a shared library
  SHARED

  # Source files
  ${dart_dl_sources}
)

target_include_directories(
  dart_dl_api

  PRIVATE

  ../third_party/dart-sdk/src/runtime/
)

set_target_properties(
  dart_dl_api

  PROPERTIES

  C_VISIBILITY_PRESET hidden
  VISIBILITY_INLINES_HIDDEN 1
)